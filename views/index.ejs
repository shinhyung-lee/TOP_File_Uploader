<html>
  <head>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
  </head>
  <body> 
    <% if (locals.user) {%>
    <h4>welcome back <%= user.username %></h4>
    <form action="/upload/folder" method="POST">
      <button class="folder-create-btn" id="folder-create-btn" type="button">Create folder</button>
      <!-- <input type="submit" value="Create folder" class="folder-create-btn"> -->
    </form>
    <form action="/upload/file" method="post" enctype="multipart/form-data">
      <input type="file" name="userfile" />
      <input type="submit" value="upload" id="upload_file">
    </form>
    <form action="/auth/logout" method="POST">
      <button type="submit">
        Log out
      </button>
    </form>
    <div id="create-modal" style="display: none">
      <form method="POST" action="/upload/folder" class="modal-content">
        <label for="folder_name">Folder name:</label>
        <input type="text" id="folder_name" name="folder_name">
        <button type="submit">create</button>
      </form>
    </div>
    <% } else { %>
    <h4>file uploader</h4>
    <a href="/auth/signup">signup</a>
    <a href="/auth/login">login</a>
    <%}%>
    <script>
      const modal = document.getElementById("create-modal");
      const btn = document.getElementById("folder-create-btn");
      btn.addEventListener('click', () => {
        modal.style.display = "block";
      })
      window.onclick = function (e) {
        if (e.target == modal) {
          modal.style.display = "none";
        }
      }
    </script>
  </body>
</html>
